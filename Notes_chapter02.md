# 第二章：TensorFlow 环境搭建

## 1.Protocol Buffer

Protocol Buffer©是谷歌开发的处理结构化数据的工具。

![1547184660709](/images/1.png)

上面的用户信息就是一个结构化的数据。要将这些结构化的用户信息持久化或者进行网络传输时，就需要先将它们序列化。所谓序列化，是将结构化的数据变成数据流的格式，简单地说就是变为一个字符串。将结构化的数据序列化，井从序列化之后的数据流中还原出原来的结构化数据，统称为处理结构化数据，这就是Protocol Buffer 解决的主要问题。

Protocol Buffer 格式的数据和XML 或者JSON 格式的数据有比较大的区别。首先，Protocol Buffer 序列化之后得到的数据不是可读的字符串，而是二进制流。其次， XML 或JSON 格式的数据信息都包含在了序列化之后的数据中，不需要任何其他信息就能还原序列化之后的数据。但使用Protocol Buffer 时需要先定义数据的格式（ schema ）。还原一个序列化之后的数据将需要使用到这个定义好的数据格式。以下代码给出了上述用户信息样例的数据格式定义文件。因为这样的差别， Protocol Buffer 序列化出来的数据要比XML 格式的数据小3 到10 倍，解析时间要快20 到100 倍。

Protocol Buffer 定义数据格式的文件一般保存在.proto 文件中。每一个message 代表了一类结构化的数据。

## 2. BAZEL

Bazel 是从谷歌开源的自动化构建工具，谷哥大内部绝大部分的应用都是通过它来编译的。相比传统的Makefile 、Ant 或者Maven, Bazel 在速度、可伸缩性、灵活性以及对不同程序语言和平台的支持上都要更加出色。在一个项目空间内， Bazel 通过BUILD 文件来找到需要编译的目标。①BUILD 文件采用一种类似于Python 的语法来指定每一个编译目标的输入、输出以及编译方式。与Makefile这种比较开放式的编译工具不同， Bazel 的编译方式是事先定义好的。

![](/images/2.png)

![](/images/3.png)

BUILD 文件是由一系列编译目标组成的。定义编译目标的先后顺序不会影响编译的结果。在每一个编译目标的第一行要指定编译方式，在这个样例中就是py_library 或者py_binary 。在每一个编译目标中的主体需要给出编译的具体信息。编译的具体信息是通过定义name 、srcs 、deps 等属性完成的。name 是一个编译目标的名字，这个名字将被用来指代这一条编译目标。srcs 给出了编译所需要的源代码，这一项可以是一个列表。dep s 给出了编译所需要的依赖关系。